{% extends "base.html" %}
{% block content %}
<div class="max-w-6xl mx-auto px-4 py-8">
  <a
    href="javascript:history.back()"
    class="inline-flex items-center text-slate-600 hover:text-slate-900 mb-4"
  >
    &larr; Back
  </a>

  <div class="rounded-3xl bg-gradient-to-r from-indigo-600 to-blue-500 text-white p-6 mb-8 shadow">
    <p class="uppercase tracking-[0.2em] text-xs text-blue-100">Booking</p>
    <h1 class="text-3xl font-bold mt-1">Confirm Your Service</h1>
    <p class="text-blue-100 mt-2">Pick date, add address, and place your booking.</p>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <div class="lg:col-span-2 bg-white rounded-2xl shadow border border-slate-100 p-6">
      <h2 class="text-xl font-semibold mb-5">Booking Details</h2>

      <form id="booking-form" class="space-y-5">
        <div>
          <label for="date" class="block text-sm font-medium text-slate-700 mb-2">Preferred Date</label>
          <input
            type="date"
            id="date"
            class="w-full border border-slate-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-300 focus:border-blue-400 outline-none"
            required
          />
        </div>

        <div>
          <label for="address" class="block text-sm font-medium text-slate-700 mb-2">Service Address</label>
          <textarea
            id="address"
            rows="3"
            class="w-full border border-slate-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-300 focus:border-blue-400 outline-none"
            placeholder="House number, street, area"
            required
          ></textarea>
        </div>

        <div>
          <div class="flex items-center justify-between mb-2 gap-3">
            <label for="customer-location" class="block text-sm font-medium text-slate-700">Customer Location</label>
            <button
              type="button"
              id="use-current-location"
              class="text-xs px-3 py-1 rounded-full border border-slate-300 text-slate-700 hover:bg-slate-50"
            >
              Use Current Location
            </button>
          </div>
          <input
            type="text"
            id="customer-location"
            class="w-full border border-slate-300 rounded-lg p-3 bg-slate-50 text-slate-700"
            placeholder="City or GPS location"
            readonly
          />
        </div>

        <div>
          <label for="time-slot" class="block text-sm font-medium text-slate-700 mb-2">Preferred Time Slot</label>
          <select
            id="time-slot"
            class="w-full border border-slate-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-300 focus:border-blue-400 outline-none"
            required
          >
            <option value="MORNING">Morning (8 AM - 12 PM)</option>
            <option value="AFTERNOON">Afternoon (12 PM - 4 PM)</option>
            <option value="EVENING">Evening (4 PM - 8 PM)</option>
          </select>
        </div>

        <div>
          <label for="landmark" class="block text-sm font-medium text-slate-700 mb-2">Landmark (Optional)</label>
          <input
            type="text"
            id="landmark"
            class="w-full border border-slate-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-300 focus:border-blue-400 outline-none"
            placeholder="Near metro station, mall, etc."
          />
        </div>

        <div>
          <label for="notes" class="block text-sm font-medium text-slate-700 mb-2">Special Instructions (Optional)</label>
          <textarea
            id="notes"
            rows="3"
            class="w-full border border-slate-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-300 focus:border-blue-400 outline-none"
            placeholder="Anything the professional should know"
          ></textarea>
        </div>

        <p id="error" class="text-red-600 text-sm hidden"></p>
        <p id="success" class="text-emerald-600 text-sm hidden"></p>

        <button
          id="submit-booking"
          class="w-full sm:w-auto bg-slate-900 text-white px-6 py-3 rounded-lg hover:bg-slate-800 transition disabled:opacity-60 disabled:cursor-not-allowed"
        >
          Confirm Booking
        </button>
      </form>
    </div>

    <aside class="bg-white rounded-2xl shadow border border-slate-100 p-6 h-fit">
      <h3 class="text-lg font-semibold mb-4">Selected Service</h3>
      <div class="space-y-2 text-sm">
        <p><span class="text-slate-500">Service:</span> <span id="selected-service-name" class="font-medium text-slate-800">Loading...</span></p>
        <p><span class="text-slate-500">Provider:</span> <span id="selected-provider-name" class="font-medium text-slate-800">Loading...</span></p>
        <p><span class="text-slate-500">Rating:</span> <span id="selected-provider-rating" class="font-medium text-slate-800">-</span></p>
        <p><span class="text-slate-500">Price:</span> <span id="selected-provider-price" class="font-medium text-emerald-700">-</span></p>
        <p><span class="text-slate-500">Location:</span> <span id="selected-provider-location" class="font-medium text-slate-800">-</span></p>
      </div>

      <hr class="my-5" />

      <h4 class="text-sm font-semibold text-slate-800 mb-2">Tips</h4>
      <ul class="text-sm text-slate-600 space-y-1 list-disc pl-5">
        <li>Use complete address for quick confirmation.</li>
        <li>Keep phone reachable on service day.</li>
        <li>You can track updates from dashboard.</li>
      </ul>
    </aside>
  </div>
</div>

<script src="/static/js/create_booking.js"></script>

{% endblock %}
